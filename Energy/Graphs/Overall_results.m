%Overall Testing

%Model 1
Eff_m1 = [86.03	86.62	86.66	86.58	86.89	86.47	86.63	86.85	86.38	86.48	87.03	86.38	87.29	86.74	86.28	87.06	86.81	86.69	86.84	86.14	87.00	86.46	87.73	86.92	87.17	87.50	86.89	86.20	86.09	87.05	86.37	86.49	86.45	86.26	87.13	86.10	86.19	86.58	86.77	86.68	86.59	86.04	86.77	86.67	86.40	86.59	86.45	86.96	85.80	86.82	86.36	86.03	86.64	86.73	86.44	86.58	86.80	86.31	87.40	86.66	86.67	87.07	86.00	85.96	86.65	84.84	86.47	86.75	85.69	86.94	86.35	86.70	86.08	85.88	86.80	86.54	86.08	86.42	86.92	86.52	85.58	87.73	86.58	86.26	86.23	86.93	86.82	86.67	86.91	86.31	86.69	86.94	86.64	86.75	86.70	86.77	86.77	86.66	87.04	86.78	86.65	87.13	86.67	86.76];
time_Eff = linspace(1,104,104);
outvoltage_m1 = [4.68177	4.69712	4.69712	4.69712	4.71247	4.71247	4.71247	4.71247	4.71247	4.74317	4.75852	4.72782	4.72782	4.73	4.72782	4.72782	4.72782	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.72782	4.72782	4.72782	4.74317	4.80457	4.81992	4.91202	4.97342	4.71247	4.71247	4.71247	4.72782	4.71247	4.72782	4.71247	4.71247	4.72782	4.71247	4.71247	4.71247	4.72782	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.71247	4.71	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.71247	4.72782	4.72782	4.71247	4.71247	4.71247	4.71247	4.72782	4.71247	4.72782	4.71247	4.71247	4.72782	4.72782	4.72782	4.72782	4.73	4.75852];

outcurrent_m1 =[0.4541	0.4758	0.4936	0.5043	0.5188	0.5292	0.5397	0.5468	0.5559	0.5532	0.5602	0.5615	0.5653	0.57	0.5677	0.5673	0.5656	0.5667	0.5671	0.5676	0.5655	0.5672	0.5658	0.56	0.5648	0.5618	0.5636	0.5588	0.5576	0.548	0.5408	0.5681	0.5692	0.569	0.5687	0.5661	0.5701	0.5694	0.5679	0.5674	0.567	0.5666	0.5687	0.5679	0.5674	0.5694	0.5686	0.5696	0.5696	0.5679	0.5662	0.5686	0.5659	0.567	0.565	0.5623	0.5654	0.5667	0.5683	0.567	0.5632	0.5672	0.5621	0.567	0.5686	0.5693	0.5734	0.5675	0.5626	0.5624	0.5652	0.5632	0.5673	0.5638	0.56	0.5654	0.5645	0.5643	0.5666	0.5652	0.5641	0.5634	0.5635	0.5642	0.56	0.5641	0.5652	0.5646	0.5658	0.5617	0.5657	0.563	0.5614	0.5654	0.57	0.5668	0.5644	0.5653	0.5646	0.5647	0.5658	0.5651	0.5668	0.5667	0.5639	0.5657	0.5556	0.5606	0.5643	0.5603	0.5661	0.5639	0.5634	0.5611	0.56	0.5621	0.5631	0.56	0.5654	0.5646	0.5629	0.5612	0.5661	0.5642	0.562	0.5636	0.5645	0.5647	0.5627	0.5646	0.5617	0.5639	0.5645	0.5639	0.5652	0.5648	0.5645	0.565	0.5654	0.5649	0.565	0.5646	0.5648	0.56	0.5594];
time_vc1 = linspace(1,145,145);

power_m1 = [-0.448	-0.29255	-0.566	1.43815	1.55522	1.63007	1.72802	1.79495	1.87932	1.92614	2.00461	2.04926	2.12599	2.23	2.3185	2.36876	2.44483	2.49384	2.54332	2.57678	2.61966	2.62392	2.66572	2.65	2.67264	2.68	2.68398	2.68209	2.67405	2.67056	2.67244	2.6748	2.66	2.67291	2.675	2.67	2.67027	2.65609	2.67325	2.68479	2.68759	2.69179	2.68963	2.67715	2.68234	2.68139	2.68871	2.66773	2.69533	2.68328	2.67621	2.68256	2.67197	2.67008	2.67998	2.68493	2.67385	2.68328	2.67951	2.68422	2.68422	2.67621	2.6682	2.67951	2.66679	2.68067	2.66254	2.64982	2.66443	2.67056	2.6781	2.67197	2.65406	2.67291	2.65	2.67197	2.67951	2.68281	2.70213	2.67433	2.65123	2.65029	2.66349	2.65406	2.67	2.65689	2.66	2.66443	2.66019	2.65925	2.67008	2.66349	2.6583	2.655	2.66	2.65877	2.66	2.6583	2.66349	2.66066	2.66631	2.64699	2.66584	2.65312	2.64558	2.66443	2.66	2.67103	2.65972	2.66396	2.66066	2.6698	2.66631	2.66302	2.67103	2.67056	2.65736	2.66584	2.61825	2.64181	2.65925	2.6404	2.66773	2.65736	2.655	2.64417	2.63898	2.64888	2.65359	2.64758	2.66443	2.66066	2.65265	2.64464	2.66773	2.65877	2.64841	2.65595	2.66019	2.66113	2.66034	2.66933	2.64699	2.66	2.66019	2.65736	2.67216	2.6616	2.66885	2.66254	2.66443	2.67074	2.67122	2.67	2.67027	2.65	2.66192];
input_power_m1 = [2.31692	2.41059	2.53335	2.63972	2.69691	2.78975	2.83768	2.90687	2.94097	2.97049	2.88477	3.0485	3.06276	3.07014	3.09259	3.09243	3.0896	3.07875	3.09046	3.07801	3.0896	3.08439	3.08926	3.07792	3.06848	3.07661	3.06094	3.0779	3.07536	3.0727	3.06724	3.08664	3.10301	3.10254	3.0855	3.08041	3.10174	3.08579	3.08835	3.08963	3.09835	3.10379	3.09382	3.09837	3.08845	3.08831	3.09878	3.09857	3.09074	3.09815	3.08537	3.07898	3.0871	3.07104	3.06971	3.07104	3.06052	3.07617	3.08926	3.07685	3.08106	3.07235	3.06367	3.04577	3.08277	3.07763	3.08832	3.0779	3.07557	3.07844	3.05956	3.07281	3.09088	3.07339	3.0849	3.05806	3.08963	3.0855	3.08405	3.06959	3.06663	3.0661	3.09644	3.0641	3.0708	3.07678	3.07583	3.07763	3.0662	3.08508	3.0704	3.07213	3.07509	3.07541	3.07275	3.09002	3.07213	3.06918	3.0827	3.05457	3.07678	3.07251	3.06779	3.10546	3.09134	3.07666	3.08597	3.05525	3.06531	3.08125	3.06832	3.0775	3.06226	3.07165	3.07297	3.05172	3.0662	3.07583	3.08308	3.06092	3.06585	3.0901	3.04093	3.07084	3.07043	3.08	3.0602	3.06502	3.06959	3.07123	3.06675	3.06535	3.05982	3.06705	3.08016	3.07001	3.07593	3.06833	3.07466	3.06835	3.07805	3.08063	3.06459	3.06194	3.06805];

time_p1 = linspace(1,157,157);
time_inp1 = linspace(1,145,145);

Eff_lastmodel1 = [91.76	92.71	91.52	89.74	90.65	89.39	89.63	88.64	89.07	88.33	92.41	87.08	87.26	87.25	86.79	86.73	86.55	86.74	86.47	86.90	86.25	86.66	86.59	86.71	87.02	86.33	87.33	87.23	87.39	87.60	87.69	86.73	86.44	86.43	87.14	86.60	86.90	86.96	86.66	86.82	86.24	86.03	86.62	86.66	86.58	86.89	86.47	86.63	86.85	86.38	86.48	87.03	86.38	87.29	86.74	86.28	87.06	86.81	86.69	86.84	86.14	87.00	86.46	87.73	86.92	87.17	87.50	86.89	86.20	86.09	87.05	86.37	86.49	86.45	86.26	87.13	86.10	86.19	86.58	86.77	86.68	86.59	86.04	86.77	86.67	86.40	86.59	86.45	86.96	85.80	86.82	86.36	86.03	86.64	86.73	86.44	86.58	86.80	86.31	87.40	86.66	86.67	87.07	86.00	85.96	86.65	84.84	86.47	86.75	85.69	86.94	86.35	86.70	86.08	85.88	86.80	86.54	86.08	86.42	86.92	86.52	85.58	87.73	86.58	86.26	86.23	86.93	86.82	86.67	86.91	86.31	86.69	86.94	86.64	86.75	86.70	86.77	86.77	86.66	87.04	86.78	86.65	87.13	86.67	86.76];
time_Eff1=linspace(1,145,145);


%Model 2
Eff_m2 = [85.23	86.00	86.55	87.94	89.51	86.06	88.59	88.80	89.08	88.69	88.62	88.29	88.44	88.67	88.38	88.33	88.72	88.96	88.70	91.21	90.25	88.74	88.65	88.04	88.21	88.21	88.77	88.33	88.42	87.96	87.85	88.30	87.75	87.85	87.81	87.58	87.48	88.07	86.55	85.71	84.68	85.24	85.86	86.58	87.74	87.35	87.16	87.39	87.78	87.97	87.69	87.69	87.68	87.68	87.16	87.47	87.35	87.52	87.69	87.60	86.73	87.02	86.14	86.70	85.80	86.90	86.31	88.16	87.78	88.09	87.77	88.33	88.50	88.14	88.64	88.33	88.09	88.11	88.54	87.75	87.46	88.11	87.42	87.82	87.41	88.26	87.65	88.12	88.28	88.28	87.76	88.00	87.66	88.94	87.88	88.41	87.87	88.03	88.65	88.18	88.49	89.29	88.58	88.17];
outvoltage_m2 = [3.58	4.54	4.54	4.54	4.54	4.56	4.56	4.56	4.57	4.59	4.61	4.62	4.64	4.64	4.65	4.67	4.68	4.68	4.7	4.7	4.7	4.7	4.71	4.71	4.7	4.71	4.7	4.71	4.71	4.71	4.71	4.71	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.68	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.7	4.71	4.71	4.7	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71	4.71];
outcurrent_m2 = [0.054	0.0739	0.1134	0.1142	0.1261	0.1317	0.1412	0.1459	0.1613	0.1948	0.2187	0.2518	0.2941	0.3235	0.4437	0.4712	0.4949	0.5085	0.5273	0.5385	0.5498	0.5563	0.5631	0.5673	0.5707	0.5577	0.5691	0.5705	0.5692	0.5674	0.5656	0.5644	0.564	0.5653	0.5625	0.5598	0.5594	0.5599	0.5558	0.5566	0.5527	0.5459	0.5439	0.5419	0.5418	0.5409	0.5409	0.5407	0.5392	0.539	0.5383	0.5389	0.5384	0.5379	0.5369	0.5357	0.5366	0.5374	0.536	0.5354	0.5343	0.539	0.5433	0.5465	0.5494	0.5512	0.5509	0.5511	0.5534	0.5532	0.5534	0.5543	0.5536	0.5553	0.554	0.5533	0.5553	0.5561	0.5579	0.5571	0.5565	0.559	0.556	0.5602	0.5622	0.564	0.574	0.5716	0.5726	0.5731	0.5735	0.5749	0.5743	0.5731	0.5743	0.5728	0.5731	0.573	0.5723	0.5712	0.5738	0.5724	0.5728	0.5735	0.5756	0.5725	0.5743	0.5747	0.575	0.5741	0.5746	0.5738	0.5763	0.5747	0.5757	0.5749	0.5741	0.5763	0.5743	0.5722	0.5764	0.5753	0.5715];
time_vc2 = linspace(1,123,123);

power_m2 = [0.19332	0.016997	0.514836	0.518468	0.572494	0.597918	0.643872	0.665304	0.735528	0.890236	1.003833	1.160798	1.358742	1.50104	2.058768	2.19108	2.311183	2.37978	2.467764	2.53095	2.58406	2.61461	2.64657	2.671983	2.687997	2.62119	2.680461	2.68135	2.680932	2.672454	2.663976	2.658324	2.65644	2.65691	2.64375	2.63106	2.62918	2.63153	2.61226	2.61602	2.59769	2.56573	2.55633	2.54693	2.535624	2.54223	2.54223	2.54129	2.53424	2.5333	2.53001	2.53283	2.53048	2.52813	2.52343	2.51779	2.52202	2.52578	2.5192	2.51638	2.51121	2.5333	2.55351	2.56855	2.58218	2.59064	2.58923	2.59017	2.60098	2.60004	2.60098	2.60521	2.60192	2.60991	2.6038	2.60051	2.60991	2.61367	2.62213	2.61837	2.61555	2.6273	2.6132	2.63294	2.647962	2.65644	2.65597	2.70354	2.692236	2.696946	2.699301	2.701185	2.707779	2.704953	2.699301	2.704953	2.697888	2.699301	2.69883	2.695533	2.690352	2.702598	2.696004	2.697888	2.701185	2.711076	2.696475	2.704953	2.706837	2.70825	2.704011	2.706366	2.702598	2.714373	2.706837	2.711547	2.707779	2.704011	2.714373	2.704953	2.695062	2.714844	2.709663	2.691765];
time_p2 = linspace(1,124,124);
input_power_m2 = [0.239	0.021	0.609	0.646	0.671	0.742	0.809	0.807	0.865	1.128	1.177	1.379	1.639	1.796	2.463	2.624	2.732	2.726	2.998	2.936	3.032	3.040	3.058	3.038	3.003	3.046	3.026	3.020	3.010	3.013	3.006	3.011	3.004	2.996	2.992	2.979	2.963	2.958	2.945	2.868	2.878	2.891	2.883	2.893	2.875	2.882	2.864	2.877	2.866	2.880	2.880	2.868	2.884	2.878	2.874	2.875	2.883	2.868	2.911	2.936	2.966	2.972	2.974	2.967	2.943	2.966	2.971	2.964	2.963	2.956	2.966	2.971	2.968	2.977	2.987	2.973	2.988	2.986	2.990	2.989	3.016	3.019	3.034	3.037	3.086	3.057	3.077	3.067	3.067	3.062	3.075	3.058	3.060	3.069	3.045	3.062	3.063	3.064	3.048	3.072	3.076	3.067	3.084	3.072	3.090	3.072	3.076	3.070	3.066	3.068	3.081	3.076	3.083	3.052	3.080	3.067	3.082	3.072	3.062	3.068	3.046	3.041	3.059	3.053];
time_inp2 = linspace(1,124,124);
Eff_lastmodel2 = [87.30	89.20	88.23	86.00	86.55	87.94	89.51	86.06	88.59	88.80	89.08	88.69	88.62	88.29	88.44	88.67	88.38	88.33	88.72	88.96	88.70	91.21	90.25	88.74	88.65	88.04	88.21	88.21	88.77	88.33	88.42	87.96	87.85	88.30	87.75	87.85	87.81	87.58	87.48	88.07	86.55	85.71	84.68	85.24	85.86	86.58	87.74	87.35	87.16	87.39	87.78	87.97	87.69	87.69	87.68	87.68	87.16	87.47	87.35	87.52	87.69	87.60	86.73	87.02	86.14	86.70	85.80	86.90	86.31	88.16	87.78	88.09	87.77	88.33	88.50	88.14	88.64	88.33	88.09	88.11	88.54	87.75	87.46	88.11	87.42	87.82	87.40713871	88.26	87.65	88.12	88.28	88.28	87.76	88.00	87.66	88.94	87.88	88.41	87.87	88.03	88.65	88.18	88.49	89.29	88.58	88.17];
time_Eff2 = linspace(1,106,106);


figure(1);
yyaxis left 
v1 = plot(time_vc1,outvoltage_m1,'b-',LineWidth=1.2);
hold on
v2 = plot(time_vc2,outvoltage_m2,'m-',LineWidth=1.2);
hold on 
ylabel("Output Voltage [V]",'FontSize',13)
set(gca,'ycolor','k')

yyaxis right
v3 = plot(time_vc1,outcurrent_m1,'r-',LineWidth=1.2);
hold on 
v4 = plot(time_vc2,outcurrent_m2,'g-',LineWidth=1.2);
xlim([0 123])
ylim([0 0.6])
ylabel("Output Current [A]",'FontSize',13)
xlabel("Time [s]",'FontSize',13)
set(gca,'xcolor','k','ycolor','k')
legend([v1,v2,v3,v4],"Output voltage 1",'Output voltage 2','Output current 1','Output current 2', 'Location','Southeast')
set(gca,'LineWidth',1.5,'FontWeight','bold','FontSize',14)
title("Charging Performance (Voltage & Current)",'FontSize',14)
saveas(gcf,"ChargingPerformance_VI.jpg",'jpg')


figure(2);
yyaxis left
p1 = plot(time_p1,power_m1,'b-',LineWidth=1.2);
hold on
p2 = plot(time_p2,power_m2,'m-',LineWidth=1.2);
hold on
xlim([0,124]);
ylim([-0.7 2.8])
ylabel("Output Power [W]",'FontSize',13)
set(gca,'ycolor','k')

yyaxis right
p3 = plot(time_Eff,Eff_m1,'r-',LineWidth=1.2);
hold on
p4 = plot(time_Eff,Eff_m2,'g-',LineWidth=1.2);
ylim([70,100]);
xlim([0,104]);
xlabel("Time [s]",'FontSize',13)
ylabel('Efficiency [%]','FontSize',13)
set(gca,'xcolor','k','ycolor','k')
legend([p1,p2,p3,p4],"Output Power 1", "Output Power 2",'Efficiency 1','Efficiency 2', 'Location','Southeast')
set(gca,'LineWidth',1.5,'FontWeight','bold','FontSize',14)
title("Charging Performance (Power and Efficiency)",'FontSize',14)
saveas(gcf,"Charging_Perfor_PE.jpg",'jpg')

figure(3);
yyaxis left
p1 = plot(time_inp1,input_power_m1,'b-',LineWidth=1.2);
hold on
p2 = plot(time_inp2,input_power_m2,'m-',LineWidth=1.2);
hold on
p3 = plot(time_p1,power_m1,'-','Color',	'#7E2F8E',LineWidth=1.2);
hold on
p4 = plot(time_p2,power_m2,'g-',LineWidth=1.2);
xlim([0,124]);
ylim([-0.7 3.3])
ylabel("Power [W]",'FontSize',12)
set(gca,'ycolor','k')

yyaxis right
p5 = plot(time_Eff1,Eff_lastmodel1,'Color','#D95319',LineWidth=1.2);
hold on
p6 = plot(time_Eff2,Eff_lastmodel2,'c-',LineWidth=1.2);
ylim([70,100]);
xlim([0,104]);
xlabel("Time [s]",'FontSize',12)
ylabel('Efficiency [%]','FontSize',12)
set(gca,'xcolor','k','ycolor','k')
legend([p1,p2,p3,p4,p5,p6],"Input Power 1","Input Power 2", "Output Power 1", "Output Power 2",'Efficiency 1','Efficiency 2','FontSize',12 ,'Location','Southeast')
set(gca,'LineWidth',1.5,'FontWeight','bold','FontSize',13)
title("Charging Performance (Power and Efficiency)",'FontSize',13)
saveas(gcf,"Charging_Power.jpg",'jpg')

